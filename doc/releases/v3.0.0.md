# v3.0.0

## How to install

**Step 1**: MySQL Backup

    mysqldump wdc_styleguide > /root/mysql_23_04_11.sql

**Step 2**: Disable webserver

    systemctl stop apache2

**Step 3**: Move old wirhub as backup

    mv wirHub wirhub-deprecated

**Step 4**: Clone new repository

    git clone git@github.com:wirDesign-communication-AG/wirhub-app.git wirhub/

**Step 5**: Move files

    mv wirhub-deprecated/.env.local wirhub/
    mv wirhub-deprecated/files/* wirhub/files/
    mv wirhub-deprecated/src/AppBundle/Resources/theme/ wirhub/files/

**Step 6**: Composer setup

    cd wirhub && COMPOSER_ALLOW_SUPERUSER=1 composer install --no-dev --optimize-autoloader

**Step 7**: Verify migrations before execution

    php bin/console doctrine:migrations:status

If you receive "The metadata storage is not up-to-date, please run the sync-metadata-storage command to fix this issue." you have to fix the serverVersion parameter for `DATABASE_URL` in `.env.local`!

There will be 1 `new` migration if everything is alright.

**Step 8**: Migrate database

    php bin/console doctrine:migrations:migrate

Do not proceed if this step fails! Copy the error message and reimport your mysql dump (Step 1).

**Step 9**: Execute one full update

    make update

**Step 10**: Update vhost

The new public folder is `public/` instead of `web/`

**Step 11**: Reenable webserver

    systemctl start apache2

## Vendors

- aws/aws-sdk-php (3.262.4 => 3.263.2)
- doctrine/data-fixtures (1.6.3 => 1.6.5)
- php-http/discovery (1.15.2 => 1.15.3)
- phpstan/phpdoc-parser (1.16.1 => 1.17.0)
- phpstan/phpstan (1.10.9 => 1.10.10)
- psr/http-message (1.0.1 => 1.1)
- symfony/string (v5.4.21 => v5.4.22)